<!--Sources:
https://www.railstutorial.org/book, Hartl Michael, 2014
http://www.jorgecoca.com/buils-search-form-ruby-rails/-->

<header class="navbar navbar-inverse">
 <div class="container-fluid">
  <!--%= link_to "Skate Spot App", root_path, id: "logo" %>-->
   <nav>
      <ul class="nav navbar-nav navbar-left">
             <% if !current_page?(controller: 'static_pages', action: 'home') %>
        <li><%= link_to "Home", root_path %></li>
             <% end %>


            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                User Options <b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
               <% if logged_in? %>
               <li><%= link_to "Users", users_path %></li>
                <li class="divider"></li>
                <li>
                <li><%= link_to "Profile", current_user %></li>
                <li><%= link_to "Settings", edit_user_path(current_user) %></li>
                <li class="divider"></li>
                <li>
                  <%= link_to "Log out", logout_path, method: "delete" %>
                </li>
               <% else %>
                <li><%= link_to "Log in", login_path %></li>
                <li class="divider"></li>
                <li>
                <li><%= link_to "Create account", new_user_path %></li>
               <% end %>
              </ul>
            </li>

     <!--<ul class="nav navbar-nav navbar-right">-->
       <li class="dropdown">
         <a href="#" class="dropdown-toggle" data-toggle="dropdown">
           Skate Spot Options<b class="caret"></b>
         </a>
         <ul class="dropdown-menu">
           <li><%= link_to "View all Skate Spots", skate_spots_path %>
           </li>
             <!--% if !current_page?(controller: 'static_pages', action: 'home') %>-->
              <li class="divider">
              </li>
               <!-- When submit the form, the view rendered will be the index view of our articles resource -->
               <%= form_tag(skate_spots_path, :method => "get", class: "navbar-form", id: "search-form") do %>
                 <div class="input-append">
                   <%= text_field_tag :search, params[:search], class: "span2", placeholder: "Search all Skate Spots" %>
                   <!-- In order to have the "search" icon int the button, we need to use plain HTML instead 
                   of using a Rails form helper -->
                     <button class="btn btn-default btn-xs" type="submit"><i class="icon-search icon-white">Search >></i></button>
                     <!--<button class="btn-xs btn-primary-xs" type="submit"><i class="icon-search icon-white"> Search</i></button>-->
                 </div>
               <% end %>
            <!--% end %>-->
            <% if logged_in? %>
               <li><%= link_to "New Skate Spot", new_skate_spot_path %>
               </li>
             <% end %>

           </ul>
          </li>


       <% if logged_in? %>
        <% if current_page?(controller: 'skate_spots', action: 'show') %>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              Rating Options<b class="caret"></b>
            </a>
            <!-- <ul class="dropdown-menu"> -->
            <ul class="dropdown-menu multi-level" role="menu" aria-labelledby="dropdownMenu">
              <li><%= link_to "New Rating", new_skate_spot_rating_path(@skate_spot) %>
              </li>
              <!--<li class="divider">
              </li>
             <li class="dropdown-submenu">
                <a tabindex="-1" href="#">Hover me for more options</a>
                <ul class="dropdown-menu">
                  <li><a tabindex="-1" href="#">Second level</a></li> 
                  <li>%= link_to "New Rating", new_skate_spot_rating_path(@skate_spot) %></li>
                </ul>
             </li>-->
            </ul>
         </li>
        <% end %>
       <% end %>

             <% if !current_page?(controller: 'static_pages', action: 'help') %>
        <li><%= link_to "Help", static_pages_help_path %></li>
          <% end %>
      </ul>
    </nav>
  </div>
</header>

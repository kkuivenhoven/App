<% provide(:title, "Test page") %>
<% provide(:p, "For testing purposes") %>

<!--table border="1" id="myTable" style="background-color:white"-->
<div class="table-responsive">
<table class="table skate_table" border="1" id="myTable">
 <thead>
  <tr>
    <th onclick="sortTable(0)">Name</th>
		<th>Address</th>
    <th onclick="sortTable(1)">Zip Code</th>
  </tr>
  </thead>
	<tbody>
	<% @skate_spots.each do |skate_spot| %>
					<tr>
				    <td>
              <li class="dropdown">
                <span id="skate_link"><%= link_to "#{skate_spot.name}", skate_spot %></span>
                <% if logged_in? %>
                  <% if current_user.id == skate_spot.user_id %>
                    <a href="#" class="dropdown-toggle caret_link" data-toggle="dropdown">
                      <b class="skate_caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                      <li><%= link_to "Edit", edit_skate_spot_path(skate_spot) %></li>
                      <li><%= link_to "Destroy", skate_spot, method: :delete, data: { confirm: 'Are you sure?' } %></li>
                    </ul>
                 <% end %>
                <% end %>
              </li>
						</td>
				    <td><%= skate_spot.basic_address %></td>
				    <td><%= skate_spot.zip_code %></td>
					</tr>
	<% end %>
	</tbody>
</table>
</div>

<script>
function sortTable(n) {
  var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
  table = document.getElementById("myTable");
  switching = true;
  dir = "asc"; 
  while (switching) {
    switching = false;
    rows = table.getElementsByTagName("TR");
    for (i = 1; i < (rows.length - 1); i++) {
      shouldSwitch = false;
      x = rows[i].getElementsByTagName("TD")[n];
      y = rows[i + 1].getElementsByTagName("TD")[n];
      if (dir == "asc") {
        if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
          shouldSwitch= true;
          break;
        }
      } else if (dir == "desc") {
        if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
          shouldSwitch= true;
          break;
        }
      }
    }
    if (shouldSwitch) {
      rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
      switching = true;
      switchcount ++;      
    } else {
      if (switchcount == 0 && dir == "asc") {
        dir = "desc";
        switching = true;
      }
    }
  }
}
</script>

</body>
</html>



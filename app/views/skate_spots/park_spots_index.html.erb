<p id="notice"><%= notice %></p>

<% provide(:title, "Documented") %>
<% provide(:p, "The park spots are ordered alphabetically. 
					 Click one to view more details.") %>

<div class="container">
  <div class="row">
	 <%= form_tag(skate_spots_path, :method => "get", id: "search-form") do %>
	 <%= text_field_tag :search, params[:search], placeholder: "Search SkateSpots" %>
	 <%= submit_tag "Search", class: "btn btn-default btn-sm" %>
	 <% end %>

	 <% if !@skate_spots.present? %>
		 <p>There are no skate spots containing the term(s) <%= params[:search] %>.</p>
	 <% end %>
  </div>
</div>

<div class="table-responsive">
<!--table class="table skate_table" id="myTable"-->
<table class="table skate_table" id="myTable">
 <thead>
  <tr>
    <th onclick="sortTable(0)">Name</th>
    <th>Gated</th>
    <th>Material</th>
    <th>Type</th>
    <th>Size</th>
    <th>Address</th>
  </tr>
  </thead>
  <tbody>
  <% @skate_spots.each do |skate_spot| %>
  <tr>
	 <td>
	  <span style="display:none"><%= skate_spot.name %></span>
		<li class="dropdown">
		  <span class="skate_link"><%= link_to "#{skate_spot.name}", skate_spot %></span>
		  <% if logged_in? %>
			 <% if current_user.id == skate_spot.user_id %>
				<a href="#" class="dropdown-toggle caret_link" data-toggle="dropdown">
				  <b class="skate_caret"></b>
				</a>
				<ul class="dropdown-menu">
				  <li><%= link_to "Edit", edit_skate_spot_path(skate_spot) %></li>
				  <li><%= link_to "Destroy", skate_spot, method: :delete, data: { confirm: 'Are you sure?' } %></li>
				</ul>
			<% end %>
		  <% end %>
		</li>
	 </td>


	 <td>
	 		<% if skate_spot.gated %>Yes
			<% else %>No
		  <% end %>
	 </td>
	 <td>
	 		<% if skate_spot.wood %>Wooden
		  <% elsif skate_spot.metal %>Metal
      <% elsif skate_spot.concrete %>Concrete
			<% else %>No material listed
		  <% end %>
	 </td>
	 <td>
	 		<% if skate_spot.transition %>Transition
      <% elsif skate_spot.street_plaza %>Street Plaza
      <% else %>Not listed
		  <% end %>
	 </td>
	 <td>
	 		<% if skate_spot.skate_spot_size %>Skate spot size
		  <% elsif skate_spot.neighborhood_spot_size %>Neighborhood spot size
      <% elsif skate_spot.regional_spot_size %>Regional spot size
			<% else %>No size listed
		  <% end %>
	 </td>



	 <td><%= skate_spot.complete_address %></td>
  </tr>
  <% end %>
  </tbody>
</table>
</div>

  <!--div class="table-responsive">
	 <table class="table skate_table">
     <thead>
       <tr>
        <th>Name</th>
        <th>Address</th>
        <th>Zip Code</th>
       </tr>
     </thead>

     <tbody>
      % @skate_spots.each do |skate_spot| %>
      <tr>
        <tr>
          <td>
            <li class="dropdown">
				  		<span class="skate_link">%= link_to "#{skate_spot.name}", skate_spot %></span>
              % if logged_in? %>
                % if current_user.id == skate_spot.user_id %>
                  <a href="#" class="dropdown-toggle caret_link" data-toggle="dropdown">
                    <b class="skate_caret"></b>
                  </a>
                  <ul class="dropdown-menu">
                    <li>%= link_to "Edit", edit_skate_spot_path(skate_spot) %></li>
                    <li>%= link_to "Destroy", skate_spot, method: :delete, data: { confirm: 'Are you sure?' } %></li>
                  </ul>
               % end %>
             % end %>
            </li>
          </td>
          <td>%= skate_spot.basic_address %></td>
          <td>%= skate_spot.zip_code %></td>
        </tr>
      </tr>
     % end %>
   </tbody>
  </table>
 </div-->

<br>

<% if @skate_spots.present? %>
<div id="index_map"></div>
<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB-XKZoYCQoqSadvpEnrI5wqiMVR9S_9Do&callback=allinitMap">
</script>
<br>
<% end %>

<span style="display:none" id="all_latlng"><%= @all_latlng%></span>

